# Морской бой (консольная версия)

Коротко: это консольная реализация игры «Морской бой» на Python. Вся логика находится в одном файле, запуск — из `morskoi-boi/main.py`.

## Архитектура (высокий уровень)

Проект построен вокруг объектной модели игры:
- `Dot` — точка на поле (координаты).
- `Ship` — корабль: длина, ориентация, оставшиеся жизни.
- `Board` — игровое поле: размещение кораблей, выстрелы, вывод состояния.
- `Player` — абстракция игрока.
- `User` / `AI` — реализация хода для человека и компьютера.
- `Game` — сценарий игры: инициализация, основной цикл, победа.

## Основные директории

- `morskoi-boi/` — весь код проекта.
  - `main.py` — вся логика игры, запуск снизу файла.

## Поток данных

1. `Game.__init__()` создаёт две доски `Board` через случайную расстановку кораблей.
2. Для соперника включается скрытие кораблей (`hid = True`).
3. `Game.loop()` чередует ходы игроков:
   - `Player.move()` → `ask()` → `Board.shot()`.
4. `Board.shot()` обновляет состояние поля и кораблей, сообщает результат хода.
5. `Game.loop()` проверяет победу по числу потопленных кораблей (`count == 7`).

## Важные соглашения и неочевидные моменты

- Внутри кода координаты 0-based (`Dot`), пользователь вводит 1-based (`User.ask()`).
- `Board.busy` используется в двух режимах:
  - при расстановке хранит занятые и соседние клетки;
  - во время игры хранит клетки, куда уже стреляли.
  После расстановки вызывается `Board.begin()`, чтобы очистить список.
- Скрытие кораблей соперника делается в `Board.__str__` через замену `"■"` на `"O"` при `hid=True`.
- Победа определяется по числу потопленных кораблей `count == 7` (набор длин `[3, 2, 2, 1, 1, 1, 1]`).
- В `random_place()` используется `randint(0, size)`, что иногда даёт выход за границы; это отлавливается и приводит к повторной попытке (ограничение — 2000 попыток).

## Запуск

```bash
python3 morskoi-boi/main.py
```
